<!DOCTYPE html> 
<html> 
<head> 
<title>Docs / CASH Music</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 

<link href="../assets/css/docs.css" rel="stylesheet" type="text/css" /> 

<script type="text/javascript">
/* Modernizr 2.0.6 (Custom Build) | MIT & BSD
 * Build: http://www.modernizr.com/download/#-fontface-cssclasses-teststyles
 */
;window.Modernizr=function(a,b,c){function y(a,b){return!!~(""+a).indexOf(b)}function x(a,b){return typeof a===b}function w(a,b){return v(prefixes.join(a+";")+(b||""))}function v(a){k.cssText=a}var d="2.0.6",e={},f=!0,g=b.documentElement,h=b.head||b.getElementsByTagName("head")[0],i="modernizr",j=b.createElement(i),k=j.style,l,m=Object.prototype.toString,n={},o={},p={},q=[],r=function(a,c,d,e){var f,h,j,k=b.createElement("div");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:i+(d+1),k.appendChild(j);f=["&shy;","<style>",a,"</style>"].join(""),k.id=i,k.innerHTML+=f,g.appendChild(k),h=c(k,a),k.parentNode.removeChild(k);return!!h},s,t={}.hasOwnProperty,u;!x(t,c)&&!x(t.call,c)?u=function(a,b){return t.call(a,b)}:u=function(a,b){return b in a&&x(a.constructor.prototype[b],c)};var z=function(a,c){var d=a.join(""),f=c.length;r(d,function(a,c){var d=b.styleSheets[b.styleSheets.length-1],g=d.cssRules&&d.cssRules[0]?d.cssRules[0].cssText:d.cssText||"",h=a.childNodes,i={};while(f--)i[h[f].id]=h[f];e.fontface=/src/i.test(g)&&g.indexOf(c.split(" ")[0])===0},f,c)}(['@font-face {font-family:"font";src:url("https://")}'],["fontface"]);n.fontface=function(){return e.fontface};for(var A in n)u(n,A)&&(s=A.toLowerCase(),e[s]=n[A](),q.push((e[s]?"":"no-")+s));v(""),j=l=null,e._version=d,e.testStyles=r,g.className=g.className.replace(/\bno-js\b/,"")+(f?" js "+q.join(" "):"");return e}(this,this.document);

var colors = ['cd074d','ca8c07','97b800','0080c9','8a00ca'];
var pagecolor = colors[Math.floor(Math.random() * colors.length)];
document.write('<style type="text/css">a {color:#' + pagecolor + ';}#topspc {background-color:#' + pagecolor + ';}</style>');
</script>

<link rel="icon" type="image/png" href="https://cashmusic.org/assets/images/icons/cash.png" /> 

</head> 

<body> 
<div id="topspc">
	<div id="navspc">
		<a href="/">Home</a> <a href="../">Docs</a>
	</div>
</div>
<div id="wrap"> 
	<div id="mainspc">
<div id="pagemenu"><h3>Getting Started</h3><ul class="nobullets"><li><a href="../gettingstarted/overview.html" class="usecolor1">Overview</a></li><li><a href="../gettingstarted/quickstart.html" class="usecolor1">Quick Start</a></li><li><a href="../gettingstarted/styleguidecode.html" class="usecolor1">Style Guide (code)</a></li></ul><h3>Bootstrap Script</h3><ul class="nobullets"><li><a href="../bootstrapscript/cashmusic.html" class="usecolor2">cashmusic.php</a></li></ul><h3>Core Classes</h3><ul class="nobullets"><li><a href="../coreclasses/cashdata.html" class="usecolor3">CASHData</a></li><li><a href="../coreclasses/cashdba.html" class="usecolor3">CASHDBA</a></li><li><a href="../coreclasses/cashrequest.html" class="usecolor3">CASHRequest</a></li><li><a href="../coreclasses/cashresponse.html" class="usecolor3">CASHResponse</a></li><li><a href="../coreclasses/cashsettings.html" class="usecolor3">CASHSettings</a></li><li><a href="../coreclasses/cashsystem.html" class="usecolor3">CASHSystem</a></li><li><a href="../coreclasses/elementbase.html" class="usecolor3">ElementBase</a></li><li><a href="../coreclasses/plantbase.html" class="usecolor3">PlantBase</a></li><li><a href="../coreclasses/seedbase.html" class="usecolor3">SeedBase</a></li></ul><h3>Plant Classes</h3><ul class="nobullets"><li><a href="../plantclasses/commerceplant.html" class="usecolor4">__CommercePlant</a></li><li><a href="../plantclasses/assetplant.html" class="usecolor4">AssetPlant</a></li><li><a href="../plantclasses/calendarplant.html" class="usecolor4">CalendarPlant</a></li><li><a href="../plantclasses/echoplant.html" class="usecolor4">EchoPlant</a></li><li><a href="../plantclasses/elementplant.html" class="usecolor4">ElementPlant</a></li><li><a href="../plantclasses/peopleplant.html" class="usecolor4">PeoplePlant</a></li><li><a href="../plantclasses/systemplant.html" class="usecolor4">SystemPlant</a></li></ul></div><h1>CASH Music Platform</h1>

<p>The CASH Music Platform is very much still a work in progress in its pre-release
lifecycle.</p>

<p>The DIY version of the CASH platform is a locally-installable API intended to
work in a request/response model similar to a REST implementation and handle
complex functionality around the marketing, promotion, and sale of music on an
artist's site. It is designed to work as a freestanding API or integrated with
publishing and CMS systems like Wordpress or Drupal.</p>

<h2>Requirements</h2>

<p>One of the fundamental goals of CASH Music is the be as widely deployable as possible,
and hence, to have extremely minimal dependencies outside of what comes bundled. Current
requirements:</p>

<ul>
<li><a href="http://php.net">PHP</a> 5.2.3</li>
<li>MySQL (other databases may work, but have not been tested)</li>
</ul>

<p>Plans are in the works to support SQLite.</p>

<h2>(Really) Quick Start</h2>

<p>To get your hands on a working instance as quickly as possible, fork/clone this 
repo and once it's local run /installers/php/dev<em>installer.php from the command 
line ("php path/to/DIY//installers/php/dev</em>installer.php") â€” choose the SQLite 
install option and supply an email for the admin login. Next just point Apache or 
MAMP at the main repo directory and view http://localhost/ in a browser.</p>

<h2>Notes</h2>

<p>Most of the code is currently found in framework/php/ and centers around a
single-include workflow, which means the only thing you need to do to add CM to
your site/page is include this single file:</p>

<pre><code>// this loads CASH Music DIY
require_once("$CASHMUSIC/framework/php/cashmusic.php");
</code></pre>

<p>where the $CASHMUSIC variable is the directory where you installed CASH Music
on your server. For instance, if you installed it into /home/billybob/cashmusic
then it would look like:</p>

<pre><code>// this loads CASH Music DIY
require_once("/home/billybob/cashmusic/framework/php/cashmusic.php");
</code></pre>

<p>The Seed.php does some basic housekeeping before firing up a CASHRequest
instance that parses an incoming request. That request is passed to the
appropriate Plant (kind of like a Factory) class which then figures out what to
do with the request and fires off any necessary Seed (kind of like a Worker)
classes. When done the Plant returns any information in a standard CASHResponse
format which is stored in a standardized session variable and in the original
CASHRequest.</p>

<p>So something like this:</p>

<pre><code>CASHRequest-&gt;Plant-&gt;(Seed(s) if needed)-&gt;CASHResponse
</code></pre>

<p>Long-term goal is to use standardized requests/responses to enable full action
chaining for new functionality.</p>

<h2>Getting the CASH Music codebase</h2>

<p>To hack on CASH Music DIY, first grab the git repo:</p>

<pre><code>git clone git://github.com/cashmusic/DIY.git
</code></pre>

<p>If you are behind a pesky firewall, you might need to use https, but only do
this if you must, since it is much slower and uses up more bandwidth:</p>

<pre><code>git clone https://leto@github.com/cashmusic/DIY.git
</code></pre>

<h2>Running CASHMusic Tests</h2>

<p>We have a test suite to make sure that things don't break when we add features
and fix bugs. Currently we syntax check all the PHP files and have a few basic
tests for creating the most basic CASHMusic DIY objects, but soon it will be a
beautiful butterfly.</p>

<p>To run the CASH Music PHP tests, run this command from the root directory of the
CASH Music git repo:</p>

<pre><code>cd DIY
php tests/php/all.php
</code></pre>

<p>When the tests pass, you should see something like this at the end:</p>

<pre><code>OK
Test cases run: 3/3, Passes: 43, Failures: 0, Exceptions: 0
</code></pre>

<p>Our PHP tests are written using <a href="http://www.simpletest.org/">SimpleTest</a>. Currently
we do not have any Javascript tests, but those are on the way.</p>

<h2>CASHMusic Branches + Tags</h2>

<p>Each week, we do a developer release on Thursday. The developer releases are tagged
with names in the form of 'dev<em>release</em>N' and are cut from the 'latest_stable' branch.
For example, <a href="https://github.com/cashmusic/DIY/commits/dev_release_1">this</a> is our first
dev release tag.</p>

<p>The 'master' branch is the tip of development, where new commits and pull requests get
merged into, and will be more unstable and possibly broken for short periods of time.
The 'latest_stable' branch will always point to the most recent developer release.</p>

<h2>Contributing to CASH Music</h2>

<p>We highly encourage <em>everybody</em> to scratch their itch and contribute back to CASH Music.</p>

<p>We prefer <a href="https://github.com">Github</a> <a href="http://help.github.com/send-pull-requests/">pull requests</a>,
but we will take contributions any way we can get them. If you need to etch a
patch on a grain of rice, please send a magnifying glass.</p>

<p>We assume that you already have a free <a href="https://github.com/signup/free">Github account</a>. If you don't already,
do that now. We promise, it is the bees knees.</p>

<p>First, you will want to create your "fork" of CASH Music DIY. To do this, go to
the <a href="https://github.com/cashmusic/DIY">CASH Music DIY Github project</a> and click
on the grey "Fork" button on the top right. You should see a note about
"Hardcore Forking Action" happening (teehee) and then the page will reload so
you can look at your spiffy new fork!</p>

<p>Next, click the little button next to "Read+Write access" just above the the
box describing the latest commit.  That will copy the URL of your fork to your
clipboard.</p>

<pre><code># replace USERNAME with your github username (or just paste the URL you just copied above)
git clone git@github.com:USERNAME/DIY.git
cd DIY

# change to the latest_stable branch
git checkout latest_stable

# create a new topic branch
git checkout -b my_cool_feature_branch
</code></pre>

<p>At this point, you actually hack on code, fix some docs, make something better, whatever. When
you get to a stopping point, add the files that you have changed or added:</p>

<pre><code>git add new_file.php changed_file.php
</code></pre>

<p>And then commit with a useful commit message:</p>

<pre><code>git commit -m "I promise that awesome new feature X will not set your dog on fire"
</code></pre>

<p>Commit early and often. It is like brushing your teeth: You can't do it too much. When you are
ready to send your changes up to your fork on the Github mothership:</p>

<pre><code>git push origin my_cool_feature_branch
</code></pre>

<p>Now you will be able to get feedback on your code, submit pull requests and generally bask in the
glory of social coding.</p>

<h2>Continuous Integration</h2>

<p>We use something called <a href="http://jitterbug.pl">Jitterbug</a> to run our tests every
time someone pushes to the CASH Music DIY Github repo. You can see the results
of each test run <a href="http://dev.cashmusic.org:3000/project/DIY">here</a> .</p>

<h2>Using SQLite</h2>

<p>PHP may not have SQLite support. On Debian-based systems, you can install it with</p>

<pre><code>sudo apt-get install php5-sqlite
</code></pre>

<h3>Generatign a SQLite Database</h3>

<p>In the root of DIY.git type:</p>

<pre><code>make sqlite_db
</code></pre>

<p>and a file called "cash.db" will be created. This will likely become part of the web interface Real Soon Now.</p>

<h3>Regenerating the SQLite Schema</h3>

<p>Currently, we check in the <a href="https://github.com/cashmusic/DIY/blob/master/framework/php/settings/sql/cashmusic_db.sql">MySQL schema</a>
to DIY.git each time it changes. To update the <a href="https://github.com/cashmusic/DIY/blob/master/framework/php/settings/sql/cashmusic_db_sqlite.sql">SQLite version of the schema</a>,
you need to use a utility to convert it.</p>

<p>You will need to install the <a href="http://cpan.org">CPAN</a> module <a href="https://metacpan.org/module/SQL::Translator">SQL::Translator</a>, then run this from the root of the CM repo:</p>

<pre><code>make sqlite_schema
</code></pre>

<p>NOTE: There is currently a
<a href="https://rt.cpan.org/Ticket/Display.html?id=70473">bug</a> in SQL::Translator
where BIT column types are not parsed correctly, so you will need to manually
convert those to BOOLs, like in <a href="https://github.com/cashmusic/DIY/commit/9085dce432f8e710a1a13821806139ed6f5b1628">commit 9085dce</a> .</p>

<p>If the SQLite schema is up to date, <code>git status</code> will not show anything as changed. If you <em>do</em> see changes, then commit the change and push it.</p>

<p>An easy way to install it on Debian-based systems is:</p>

<pre><code>sudo apt-get install sqlfairy
</code></pre>

<h2>License</h2>

<p>CashMusic DIY is (c) 2010 CASH Music, licensed under a AGPL license:
<a href="http://www.gnu.org/licenses/agpl-3.0.html">http://www.gnu.org/licenses/agpl-3.0.html</a></p>

	</div>
</div>

<div id="footer">
	<p><b>&copy; 2011 CASH Music.</b> All our code is open-source. <a href="http://cashmusic.org/why/" style="margin-left:0;">Learn more</a>. <a href="http://help.cashmusic.org/">Get help</a> <a href="http://cashmusic.org/donate" class="donatelink"><b>Donate</b></a></p>
</div>

</body>
</html>